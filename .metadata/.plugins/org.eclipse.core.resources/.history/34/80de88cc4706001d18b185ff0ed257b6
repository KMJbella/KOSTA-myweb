package com.my.repository;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.my.dto.Customer;
import com.my.exception.FindException;
import com.my.sql.MyConnection;

public class CustomerOracleRepository implements CustomerRepository {

	@Override
	public Customer selectByIdAndPwd(String id, String pwd) throws FindException {
		//DB와 연결
				Connection con = null;
				//SQL송신
				PreparedStatement pstmt = null;
				//송신결과
				ResultSet rs = null;
				//응답결과
				String result = "{\"status\":0}";
				try {
					con = MyConnection.getConnection();
					String selectIdNPwdSQL = "SELECT * FROM customer WHERE id=? AND pwd=?";
					pstmt = con.prepareStatement(selectIdNPwdSQL);
					pstmt.setString(1, id);
					pstmt.setString(2, pwd);
					rs = pstmt.executeQuery();
//					rs.next();
					if(rs.next()) { //로그인 성공인 경우
						result = "{\"status\":1}";
					}
					
					
				} catch (SQLException e) {
					e.printStackTrace();
				} finally {
					//DB와의 연결 닫기
					MyConnection.close(rs, pstmt, con);
				}	
	}

}
